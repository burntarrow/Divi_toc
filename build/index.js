(()=>{const t=(t,e)=>{const n=t.normalize('NFD').replace(/\p{Diacritic}/gu,'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');const o=e[n]||0;return e[n]=o+1,o?`${n}-${o}`:n};const e=(e,n,o)=>{const r=n.map((t=>t.toUpperCase())).join(','),c=[],a={};return e.querySelectorAll(r).forEach((e=>{const n=e;if(o.some((t=>n.classList.contains(t))))return;n.id||(n.id=t(n.innerText||n.textContent||'section',a)),c.push({id:n.id,text:n.innerText||n.textContent||'',level:parseInt(n.tagName.replace('H',''),10),children:[]})})),c},n=t=>{const e=[],n=[];return t.forEach((t=>{for(;n.length&&n[n.length-1].level>=t.level;)n.pop();0===n.length?e.push(t):n[n.length-1].children.push(t),n.push(t)})),e},o=(t,e)=>{const n=document.createElement('ul');return t.forEach((t=>{const r=document.createElement('li'),c=document.createElement('a');c.href=`#${t.id}`,c.textContent=t.text,r.appendChild(c);const a=document.createElement('button');a.className='toc-copy',a.type='button',a.textContent='Copy',a.addEventListener('click',(e=>{e.preventDefault();const n=`${window.location.origin}${window.location.pathname}#${t.id}`;navigator.clipboard?.writeText(n).catch((()=>{const t=document.createElement('input');t.value=n,document.body.appendChild(t),t.select(),document.execCommand('copy'),t.remove()})),a.textContent='Copied!',setTimeout((()=>a.textContent='Copy'),1e3)})),r.appendChild(a),e&&t.children.length&&r.appendChild(o(t.children,!0)),n.appendChild(r)})),n},r=(t,e)=>{const n=t.getBoundingClientRect().top+window.scrollY-e;window.scrollTo({top:n,behavior:'smooth'})},c=(t,e)=>{const n=Array.from(t.querySelectorAll('a'));document.addEventListener('scroll',(()=>{const t=window.scrollY+5;let o='';e.forEach((e=>{e.offsetTop<=t&&(o=e.id)})),n.forEach((t=>{const e=t.hash===`#${o}`;null===t.parentElement||void 0===t.parentElement||t.parentElement.classList.toggle('is-active',e)}))}),{passive:!0})};document.addEventListener('DOMContentLoaded',(()=>{const t=document.querySelector('[data-divi-toc]');if(!t)return;const a=JSON.parse(t.dataset.diviToc||'{}'),i=(a.headingLevels||'').split('|').filter(Boolean);i.length||i.push('h2','h3','h4','h5');const l=(a.ignoreClasses||'').split(',').map((t=>t.trim())).filter(Boolean),s=a.customSelector||'#main-content',d=document.querySelector(s)||document.querySelector('#main-content')||document.body,p=e(d,i,l);a.includeTitle&&document.title&&p.unshift({id:'page-title',text:document.title,level:1,children:[]});const u=p.length>= (a.minimum||2);if(!u&&'hide'===a.onEmpty)return void(t.style.display='none');if(!u&&'message'===a.onEmpty)return void(t.innerText=a.emptyMessage||'No table of contents available.');const h='flat'!==a.structure,f=h?n(p):p;t.innerHTML='';const m=o(f,h);t.appendChild(m);const y=p.map((t=>document.getElementById(t.id))).filter((t=>Boolean(t)));t.querySelectorAll('a').forEach((t=>{t.addEventListener('click',(t=>{const n=t.currentTarget.hash.replace('#',''),o=document.getElementById(n);o&&(t.preventDefault(),r(o,a.scrollOffset||0),window.history.pushState({},{},`#${n}`))}))})),a.scrollspy&&c(t,y)}));})();
